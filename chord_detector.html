<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ¶ ç°¡æ˜“ç‰ˆå’Œå¼¦åµæ¸¬</title>
</head>
<body>
  <h1>ğŸµ ç°¡æ˜“ç‰ˆ Chord Detector</h1>

  <p>è«‹é¸æ“‡ä¸€å€‹éŸ³æ¨‚æª”æ¡ˆï¼ˆmp3 æˆ– wavï¼‰ï¼š</p>
  <input type="file" id="audioFile" accept="audio/*" />
  <button id="uploadBtn">é–‹å§‹åµæ¸¬</button>

  <p id="result"></p>

  <script>
    document.getElementById("uploadBtn").addEventListener("click", async () => {
      const fileInput = document.getElementById("audioFile");
      const result = document.getElementById("result");

      if (!fileInput.files.length) {
        alert("è«‹å…ˆé¸æ“‡éŸ³è¨Šæª”æ¡ˆï¼");
        return;
      }

      const formData = new FormData();
      formData.append("file", fileInput.files[0]);

      result.textContent = "ğŸ§ åˆ†æä¸­ï¼Œè«‹ç¨å€™...";

      try {
        const response = await fetch("http://127.0.0.1:8000/detect-chords", {
          method: "POST",
          body: formData,
        });

        if (!response.ok) {
          throw new Error("ä¼ºæœå™¨å›æ‡‰éŒ¯èª¤");
        }

        const data = await response.json();
        result.textContent = "ğŸ¸ åµæ¸¬åˆ°çš„å’Œå¼¦æ˜¯ï¼š" + data.detected_chord;
      } catch (error) {
        result.textContent = "âš ï¸ ç„¡æ³•åµæ¸¬ï¼Œè«‹ç¢ºèªå¾Œç«¯ä¼ºæœå™¨æ˜¯å¦å•Ÿå‹•ã€‚";
        console.error(error);
      }
    });
  </script>
</body>
</html>
